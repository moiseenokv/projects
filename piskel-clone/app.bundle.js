!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){var n=this;function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Element.prototype.insertAfter=function(e){n.parentNode.insertBefore(e,n.nextSibling)},e.exports={createDomEl:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=document.createElement(e);if(null!==t){var l;if(t instanceof Array)(l=o.classList).add.apply(l,a(t));"string"==typeof t&&o.classList.add(t)}return null!==r&&(o.innerHTML=r),null!==i&&Object.keys(i).forEach((function(e){o.setAttribute(e,i[e])})),null!==n&&n.append(o),o},Localstorage:function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=t}var t,n,a;return t=e,(n=[{key:"saveData",value:function(e){""!==e&&localStorage.setItem(this.key,JSON.stringify(e))}},{key:"restoreData",value:function(){return!!localStorage.getItem(this.key)&&JSON.parse(localStorage.getItem(this.key))}}])&&r(t.prototype,n),a&&r(t,a),e}(),randomNumber:function(e,t){return Math.floor(Math.random()*(1+e-t))+t},saveProperty:function(e,t,n){e[t]=n},rgbToHex:function(e){return"#".concat(e.slice(4,-1).split(", ").map((function(e){var t=parseInt(e,10).toString(16);return 1===t.length?"0".concat(t):t})).join(""))},rgbToHexAlt:function(e,t,n){return[e,t,n].map((function(e){var t=e.toString(16);return 1===t.length?"0".concat(t):t})).join("")},lineBresingheimPen:function(e,t,n,r,a,i,o,l){var s,c=Math.round(t/i),u=Math.round(n/o),h=Math.round(r/i),f=Math.round(a/o),v=Math.abs(h-c),m=c<h?1:-1,p=-Math.abs(f-u),d=u<f?1:-1,y=v+p,b=!1;for(e.beginPath(),e.fillStyle=l;!b;)e.rect(c*i,u*o,i,o),c===h&&u===f?b=!0:((s=2*y)>p&&(y+=p,c+=m),s<v&&(y+=v,u+=d));e.fill()},lineBresingheimErase:function(e,t,n,r,a,i,o,l){var s,c=Math.round(t/i),u=Math.round(n/o),h=Math.round(r/i),f=Math.round(a/o),v=Math.abs(h-c),m=c<h?1:-1,p=-Math.abs(f-u),d=u<f?1:-1,y=v+p,b=!1;for(e.beginPath(),e.fillStyle=l;!b;)e.clearRect(c*i,u*o,i,o),c===h&&u===f?b=!0:((s=2*y)>p&&(y+=p,c+=m),s<v&&(y+=v,u+=d));e.fill()},toFastColor:function(e,t,n,r){var i=t,o=document.querySelector(".fast-colors"),l="#".concat(r.apply(void 0,a(e))),s=n(o.firstChild.style.background),c=n(o.lastChild.style.background);c=s,s=l,o.firstChild.style.background=s,o.lastChild.style.background=c,i.fastColors=[s,c]},switchCanvasAltZindex:function(e){var t=document.getElementById("drawCanvas"),n=document.getElementById("drawCanvasAlt");!0===e?(t.style.zIndex=90,n.style.zIndex=100):(t.style.zIndex=100,n.style.zIndex=90)}}},function(e,t,n){e.exports=n.p+"assets/img/5732214a6a546f463270af0674f6d845.png"},function(e,t,n){e.exports=n.p+"assets/img/b59ade9072f71bace1c8d0994b8d1fbf.png"},function(e,t,n){e.exports=n.p+"assets/img/6666ac1ba3b5c4cea421d357e7e3a39e.png"},function(e,t,n){e.exports=n.p+"assets/img/e826439d69b8b91bbf0015bebe44ca93.gif"},function(e,t,n){e.exports=n.p+"assets/img/80be3c7218a4d7f4faca5f24e395942e.gif"},function(e,t,n){n(7),e.exports=n(10)},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(e,t,n,r){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),o=new O(r||[]);return i._invoke=function(e,t,n){var r=u;return function(a,i){if(r===f)throw new Error("Generator is already running");if(r===v){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var l=A(o,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===u)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var s=c(e,t,n);if("normal"===s.type){if(r=n.done?v:h,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=v,n.method="throw",n.arg=s.arg)}}}(e,n,o),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u="suspendedStart",h="suspendedYield",f="executing",v="completed",m={};function p(){}function d(){}function y(){}var b={};b[i]=function(){return this};var g=Object.getPrototypeOf,w=g&&g(g(D([])));w&&w!==n&&r.call(w,i)&&(b=w);var E=y.prototype=p.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function C(e){var t;this._invoke=function(n,a){function i(){return new Promise((function(t,i){!function t(n,a,i,o){var l=c(e[n],e,a);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&r.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,i,o)}),(function(e){t("throw",e,i,o)})):Promise.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return t("throw",e,i,o)}))}o(l.arg)}(n,a,t,i)}))}return t=t?t.then(i,i):i()}}function A(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=c(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function D(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:t,done:!0}}return d.prototype=E.constructor=y,y.constructor=d,y[l]=d.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},k(C.prototype),C.prototype[o]=function(){return this},e.AsyncIterator=C,e.async=function(t,n,r,a){var i=new C(s(t,n,r,a));return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(E),E[l]="Generator",E[i]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=D,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return l.type="throw",l.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(8),n(9);var r=n(0),a=n(2),i=n.n(a);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=t,this.draw=n,this.tools=[{name:"pen",key:"KeyP"},{name:"color-pick",key:"KeyC"},{name:"bucket",key:"KeyB"},{name:"erase",key:"KeyE"},{name:"stroke",key:"KeyS"}],this.penSizes=[1,2,3,4],this.toolContainer=Object(r.createDomEl)("section","tools",null,null,null)}var t,n,a;return t=e,(n=[{key:"penSize",value:function(){var e=Object(r.createDomEl)("div","pen-size",this.toolContainer,null,null),t=this.state.penSizeActive;return this.penSizes.forEach((function(n,a){var i=a+1===t?["size-".concat(a+1,"x"),"active"]:"size-".concat(a+1,"x");Object(r.createDomEl)("span",i,e,null,{"data-size":n})})),e}},{key:"toolBar",value:function(){var e=Object(r.createDomEl)("ul","instruments",this.toolContainer,null,null),t=this.state.toolActive;return this.tools.forEach((function(n){var a=n.name,i=n.key,o=a===t?["tool",a,"active"]:["tool",a];Object(r.createDomEl)("li",o,e,null,{"data-key":i,title:"To enable this tool from keyboard press key (".concat(i.slice(3),")")})})),e}},{key:"fastColors",value:function(){var e=Object(r.createDomEl)("ul","fast-colors",this.toolContainer,null,null),t=this.state.fastColors;return t.forEach((function(t,n){var a=0===n?"primary":"secondary";Object(r.createDomEl)("li",a,e,null,{style:"background: ".concat(t)})})),e}},{key:"paletteColors",value:function(){var e=Object(r.createDomEl)("form",null,this.toolContainer,null,null);return Object(r.createDomEl)("label",null,e,"Colors: ",null),Object(r.createDomEl)("input","palette",e,null,{type:"color",value:"#f6c506"}),e}},{key:"init",value:function(e){return this.penSize(),this.toolBar(),this.fastColors(),this.paletteColors(),e.append(this.toolContainer),this.toolContainer}},{key:"penSizeChange",value:function(e){var t=e.target;this.state.penSizeActive=parseInt(t.getAttribute("data-size"),10),t.parentNode.querySelector(".pen-size > .active").classList.remove("active"),t.classList.add("active")}},{key:"toolSwitch",value:function(e){var t=e.target.classList[1];this.state.toolActive=t,e.target.parentNode.querySelector(".tool.active").classList.remove("active"),e.target.classList.add("active");var n="stroke"===t;Object(r.switchCanvasAltZindex)(n)}},{key:"fastColorsChange",value:function(e){var t=e.target.parentNode,n=Object(r.rgbToHex)(t.lastChild.style.background),a=Object(r.rgbToHex)(t.firstChild.style.background);t.firstChild.style.background=n,t.lastChild.style.background=a,this.state.fastColors=[n,a]}},{key:"colorChoose",value:function(e){if(e.target.classList.contains("palette")){var t=document.querySelector(".fast-colors"),n=e.target.value,r=t.firstChild.style.background;t.firstChild.style.background=n,t.lastChild.style.background=r,this.state.fastColors=[n,r]}}},{key:"setActiveTool",value:function(e){this.state.toolActive=e,document.querySelector(".tool.active").classList.remove("active"),document.querySelector(".tool.".concat(e)).classList.add("active")}},{key:"pressKeyListener",value:function(e){var t=document.querySelector('li[data-key="'.concat(e.code,'"]'));if(t){this.setActiveTool(t.classList[1]);var n="stroke"===this.state.toolActive;Object(r.switchCanvasAltZindex)(n)}}}])&&o(t.prototype,n),a&&o(t,a),e}(),s=n(1),c=n.n(s);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=t,this.draw=n,this.framesContainer=Object(r.createDomEl)("section","frames",null,null,null),this.frameList=Object(r.createDomEl)("ul",null,this.framesContainer,null,null),this.frameActive="",this.moveAction={isDown:!1,moveY:"",getLeaveLi:"",liEmpty:""}}var t,n,a;return t=e,(n=[{key:"createFrame",value:function(e,t){var n=1===t?["frame","active"]:"frame",a=Object(r.createDomEl)("li",n,this.frameList,null,null),i=Object(r.createDomEl)("img",null,a,null,e),o=Object(r.createDomEl)("div","controls",a,null,null);return["num","del","move","copy"].forEach((function(e){var n="num"===e?t:null;Object(r.createDomEl)("span",e,o,n,null)})),1===t&&(this.frameActive=i),a}},{key:"init",value:function(e){var t=this;return this.state.frameSet.forEach((function(e,n){var r={src:e,alt:"frame"};t.createFrame(r,n+1)})),Object(r.createDomEl)("button","add-new-frame",this.framesContainer,"Add new frame",null),e.append(this.framesContainer),this.framesContainer}},{key:"createNewFrame",value:function(){var e={src:c.a,alt:"frame"};this.state.frameSet.push(c.a);var t=this.createFrame(e,this.state.frameSet.length);this.frameList.append(t)}},{key:"setActiveFrame",value:function(e){this.frameList.querySelector(".frame.active").classList.remove("active"),e.target.parentNode.classList.add("active"),this.frameActive=e.target.parentNode.querySelector("img"),this.draw.fromActiveFrametoMainCanvas()}},{key:"setActiveFrameAlt",value:function(e){this.frameList.querySelector(".frame.active").classList.remove("active"),e.target.parentNode.parentNode.classList.add("active"),this.frameActive=e.target.parentNode.parentNode.querySelector("img"),this.draw.fromActiveFrametoMainCanvas()}},{key:"reindexFrames",value:function(){Object.values(this.frameList.children).forEach((function(e,t){e.querySelector(".num").innerText=t+1}))}},{key:"frameActionsClick",value:function(e){if(this.setActiveFrameAlt(e),e.target.classList.contains("copy")){var t=e.target.parentNode.parentNode.cloneNode(!0);t.classList.remove("active");var n=t.querySelector(".num"),r=parseInt(n.innerText,10);n.innerText=r+1,this.frameList.insertBefore(t,this.frameList.childNodes[r]),this.refreshFrames()}if(e.target.classList.contains("del")){if(this.frameList.childElementCount>1){var a=e.target.parentNode.querySelector(".num").innerText;e.target.parentNode.parentNode.remove(),"1"===a?this.frameList.children[0].classList.add("active"):(this.frameList.children[parseInt(a,10)-2].classList.add("active"),this.frameActive=this.frameList.children[parseInt(a,10)-2].querySelector("img"))}this.refreshFrames()}this.reindexFrames()}},{key:"frameActionsMousedown",value:function(e){e.target.classList.contains("move")&&(this.moveAction.moveY=e.clientY,this.moveAction.isDown=!0,this.moveAction.getLeaveLi=e.target.parentNode.parentNode,this.moveAction.liEmpty=Object(r.createDomEl)("li",["frame","empty"],null,null,null),this.moveAction.getLeaveLi.classList.add("leave"),document.querySelector(".frame.leave").style.offsetTop=this.moveAction.getLeaveLi.offsetTop,this.moveAction.getLeaveLi.before(this.moveAction.liEmpty),this.refreshFrames())}},{key:"frameActionsMousemove",value:function(e){this.moveAction.isDown&&this.moveAction.getLeaveLi&&(this.moveAction.getLeaveLi.style.top="".concat(e.clientY-90,"px"),this.moveAction.moveY>e.clientY&&this.moveAction.moveY-98>e.clientY&&(null!==this.moveAction.liEmpty.previousElementSibling&&this.moveAction.liEmpty.previousElementSibling.before(this.moveAction.liEmpty),this.moveAction.moveY-=120),this.moveAction.moveY<e.clientY&&this.moveAction.moveY+30<e.clientY&&(null!==this.moveAction.liEmpty.nextElementSibling&&this.moveAction.liEmpty.before(this.moveAction.liEmpty.nextElementSibling),this.moveAction.moveY+=98),this.refreshFrames())}},{key:"frameActionsMouseup",value:function(){this.moveAction.isDown&&(this.moveAction.getLeaveLi.parentNode.insertBefore(this.moveAction.getLeaveLi,this.moveAction.liEmpty),this.moveAction.liEmpty.remove(),this.moveAction.getLeaveLi.removeAttribute("style"),this.moveAction.getLeaveLi.classList.remove("leave"),this.reindexFrames()),this.moveAction.isDown=!1}},{key:"refreshFrames",value:function(){var e=Object.values(this.frameList.querySelectorAll(".frame")).map((function(e){return e.querySelector("img").src}));this.state.frameSet=e}}])&&u(t.prototype,n),a&&u(t,a),e}();function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=t,this.canvasMain="",this.canvasAlt="",this.ctxMain="",this.ctxAlt="",this.coordinates="",this.blockSize="",this.line={isDrawing:!1,startX:"",startY:"",endX:"",endY:""},this.drawContainer=Object(r.createDomEl)("section","draw",null,null,null)}var t,n,a;return t=e,(n=[{key:"canvasDraw",value:function(){var e=Object(r.createDomEl)("div","draw-container",this.drawContainer,null,null);return this.canvasMain=Object(r.createDomEl)("canvas",null,e,null,{id:"drawCanvas",width:"512",height:"512"}),this.canvasAlt=Object(r.createDomEl)("canvas",null,e,null,{id:"drawCanvasAlt",width:"512",height:"512"}),this.drawCanvas}},{key:"canvasCoordinates",value:function(e){var t=Object(r.createDomEl)("div","coord",e,null,null),n=Object(r.createDomEl)("p",null,t,"X: ",null);Object(r.createDomEl)("span",null,n,"0",null);var a=Object(r.createDomEl)("p",null,t,"Y: ",null);return Object(r.createDomEl)("span",null,a,"0",null),this.coordinates=t,t}},{key:"canvasSize",value:function(e){var t=Object(r.createDomEl)("div","canvas-size",e,null,null);Object(r.createDomEl)("span",null,t,"Canvas Size: ",null);var n=this.state.canvasSize,a=Object(r.createDomEl)("select",null,t,null,null);return[32,64,128].forEach((function(e){Object(r.createDomEl)("option",null,a,"".concat(e,"x").concat(e),{value:e})})),a.querySelector('option[value="'.concat(n,'"]')).setAttribute("selected","selected"),t}},{key:"canvasOptions",value:function(){var e=Object(r.createDomEl)("div","options",this.drawContainer,null,null);return this.canvasSize(e),e}},{key:"getMousePos",value:function(e){var t=this.canvasMain.getBoundingClientRect();return this.coordinates.firstElementChild.querySelector("span").innerText=parseInt(e.clientX-t.left,10),this.coordinates.lastElementChild.querySelector("span").innerText=parseInt(e.clientY-t.top,10),{x:e.clientX-t.left,y:e.clientY-t.top}}},{key:"setBlockSize",value:function(){this.blockSize=this.canvasMain.width/this.state.canvasSize}},{key:"init",value:function(e){this.canvasDraw(),this.canvasOptions(),this.setBlockSize(),e.append(this.drawContainer),this.ctxMain=this.canvasMain.getContext("2d");var t=f(this.state.fastColors,1)[0];return this.ctxMain.fillStyle=t,this.ctxAlt=this.canvasAlt.getContext("2d"),this.drawContainer}},{key:"pencilDrawErase",value:function(e){var t=this.state.toolActive,n=this.blockSize*this.state.penSizeActive;if(e.buttons>0&&"pen"===t){var a=e.offsetX,i=e.offsetY,o=e.movementX,l=e.movementY,s=f(this.state.fastColors,1)[0];Object(r.lineBresingheimPen)(this.ctxMain,a-o,i-l,a,i,n,n,s)}if(e.buttons>0&&"erase"===t){var c=e.offsetX,u=e.offsetY,h=e.movementX,v=e.movementY,m=f(this.state.fastColors,1)[0];Object(r.lineBresingheimErase)(this.ctxMain,c-h,u-v,c,u,n,n,m)}}},{key:"colorPicker",value:function(e){var t=this.state.toolActive,n=e.offsetX,a=e.offsetY;if("color-pick"===t){var i=this.ctxMain.getImageData(n,a,1,1).data;Object(r.toFastColor)(i,this.state,r.rgbToHex,r.rgbToHexAlt)}}},{key:"colorFill",value:function(){var e=this.state.toolActive,t=f(this.state.fastColors,1)[0];"bucket"===e&&(this.ctxMain.fillStyle=t,this.ctxMain.fillRect(0,0,this.canvasMain.width,this.canvasMain.height))}},{key:"lineDrawMousedownListener",value:function(e){"stroke"===this.state.toolActive&&(this.ctxAlt.clearRect(0,0,this.canvasAlt.width,this.canvasAlt.width),this.isDrawing=!0,this.line.startX=e.offsetX,this.line.startY=e.offsetY)}},{key:"lineDrawMousemoveListener",value:function(e){var t=this.state.toolActive,n=this.blockSize*this.state.penSizeActive,a=f(this.state.fastColors,1)[0];"stroke"===t&&!0===this.isDrawing&&(this.ctxAlt.clearRect(0,0,this.canvasAlt.width,this.canvasAlt.width),this.line.endX=e.offsetX+e.movementX,this.line.endY=e.offsetY+e.movementY,Object(r.lineBresingheimPen)(this.ctxAlt,this.line.startX,this.line.startY,this.line.endX,this.line.endY,n,n,a))}},{key:"lineDrawMouseupListener",value:function(){var e=this.state.toolActive,t=this.blockSize*this.state.penSizeActive,n=f(this.state.fastColors,1)[0];this.isDrawing=!1,"stroke"===e&&!1===this.isDrawing&&(this.ctxAlt.clearRect(0,0,this.canvasAlt.width,this.canvasAlt.width),Object(r.lineBresingheimPen)(this.ctxAlt,this.line.startX,this.line.startY,this.line.endX,this.line.endY,t,t,n),this.fromAltToMainCanvas())}},{key:"fromAltToMainCanvas",value:function(){this.ctxMain.drawImage(this.canvasAlt,0,0),this.ctxAlt.clearRect(0,0,this.canvasAlt.width,this.canvasAlt.height),this.fromMainCanvasToActiveFrame()}},{key:"fromMainCanvasToActiveFrame",value:function(){var e=document.querySelector(".frame.active > img");e.src=this.canvasMain.toDataURL(),this.ctxMain.drawImage(e,0,0)}},{key:"fromActiveFrametoMainCanvas",value:function(){var e=document.querySelector(".frame.active > img");this.ctxMain.clearRect(0,0,this.canvasMain.width,this.canvasMain.height),this.ctxMain.drawImage(e,0,0,this.canvasMain.width,this.canvasMain.width)}}])&&v(t.prototype,n),a&&v(t,a),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=t,this.previewContainer=Object(r.createDomEl)("section","preview",null,null,null),this.prevFrameContainer=Object(r.createDomEl)("div","prev-frame",null,null,null),this.fpsInputElement="",this.fullScreenButton="",this.stopAnimation=""}var t,n,a;return t=e,(n=[{key:"createFrames",value:function(){var e=this;this.state.frameSet.forEach((function(t,n){var a=0===n?"":"display:none";Object(r.createDomEl)("img",null,e.prevFrameContainer,null,{src:t,alt:"frame",style:a})}))}},{key:"init",value:function(e){var t=Object(r.createDomEl)("div","options",this.previewContainer,null,null);this.fullScreenButton=Object(r.createDomEl)("button","full-screen",t,"Fullscreen",null),Object(r.createDomEl)("button","save",t,"Save",null),this.previewContainer.append(this.prevFrameContainer),this.createFrames();var n=Object(r.createDomEl)("div","fps-set",this.previewContainer,null,null),a=Object(r.createDomEl)("label",null,n,null,{for:"fps-range"});return Object(r.createDomEl)("span","fps-value",a,this.state.fps,null),Object(r.createDomEl)("span",null,a," FPS",null),this.fpsInputElement=Object(r.createDomEl)("input","fps-change",n,null,{id:"fps-range",type:"range",min:"1",max:"24",value:this.state.fps}),e.append(this.previewContainer),this.player(),this.previewContainer}},{key:"refreshFrames",value:function(){this.prevFrameContainer.innerHTML="",this.createFrames()}},{key:"fpsRangeChange",value:function(){var e=this.previewContainer.querySelector(".fps-change").value;this.previewContainer.querySelector(".fps-value").innerText=e,this.state.fps=e,window.clearInterval(this.stopAnimation),this.player()}},{key:"enableFullscreen",value:function(){this.prevFrameContainer.requestFullscreen()}},{key:"player",value:function(){var e=this,t=this.state.fps,n=this.prevFrameContainer.childElementCount;if(n>1){var r=0;this.stopAnimation=setInterval((function(){r===n&&(r=0),0===r&&(e.prevFrameContainer.children[n-1].style.display="none",e.prevFrameContainer.children[r].style.display=""),r>=1&&(e.prevFrameContainer.children[r-1].style.display="none",e.prevFrameContainer.children[r].style.display=""),r+=1}),1e3/parseInt(t,10))}}}])&&p(t.prototype,n),a&&p(t,a),e}();function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=t,this.draw=new m(this.state),this.frames=new h(this.state,this.draw),this.tools=new l(this.state,this.draw),this.preview=new d(this.state),this.wrapperContainer=Object(r.createDomEl)("div","wrapper",null,null,null),this.head="",this.foot="",this.homeRef=""}var t,n,a;return t=e,(n=[{key:"header",value:function(){this.head=Object(r.createDomEl)("header",null,this.wrapperContainer,null,null),this.homeRef=Object(r.createDomEl)("a","logo",this.head,null,{href:"index.html"}),Object(r.createDomEl)("img",null,this.homeRef,null,{src:i.a,alt:"Piskel Clone"});var e=Object(r.createDomEl)("div","credentials",this.head,null,null);return["sign-in"].forEach((function(t){var n="create-sprite"===t?"Create Sprite":"Sign In";Object(r.createDomEl)("button",t,e,n,null)})),this.head}},{key:"footer",value:function(){this.foot=Object(r.createDomEl)("footer",null,this.wrapperContainer,null,null);var e=Object(r.createDomEl)("p",null,this.foot,"Created by ",null);Object(r.createDomEl)("a",null,e,"Vitali Maisiayonak",{href:"https://www.linkedin.com/public-profile/settings?trk=d_flagship3_profile_self_view_public_profile",about:"_blank"});var t=Object(r.createDomEl)("p",null,this.foot,"Inspired by ",null);return Object(r.createDomEl)("a",null,t,"Rolling Scopes School",{href:"https://rs.school",about:"_blank"}),this.foot}},{key:"main",value:function(){var e=Object(r.createDomEl)("main",null,this.wrapperContainer,null,null);this.tools.init(e),this.frames.init(e),this.draw.init(e),this.preview.init(e,document.body)}},{key:"wrapperInit",value:function(e){this.header(),this.main(),this.footer(),e.append(this.wrapperContainer),this.draw.fromActiveFrametoMainCanvas()}}])&&y(t.prototype,n),a&&y(t,a),e}(),g=n(3),w=n.n(g),E=n(4),k=n.n(E),C=n(5),A=n.n(C);function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wrapperContainer=Object(r.createDomEl)("div","wrapper",null,null,null),this.head="",this.foot="",this.features=["Live, preview","File export","Localstorage data save","Fullscreen mode","Google sign-in"],this.buttonCreate=""}var t,n,a;return t=e,a=[{key:"sectionSamples",value:function(){var e=Object(r.createDomEl)("section","examples",null,null,null);Object(r.createDomEl)("h2",null,e,"Examples",null);var t=Object(r.createDomEl)("ul",null,e,null,null);return[k.a,A.a].forEach((function(e){var n=Object(r.createDomEl)("li",null,t,null,null);Object(r.createDomEl)("img",null,n,null,{src:e,alt:"example"})})),e}}],(n=[{key:"header",value:function(){this.head=Object(r.createDomEl)("header",null,this.wrapperContainer,null,null);var e=Object(r.createDomEl)("a","logo",this.head,null,{href:"index.html"});Object(r.createDomEl)("img",null,e,null,{src:i.a,alt:"Piskel Clone"});var t=Object(r.createDomEl)("div","credentials",this.head,null,null);return["sign-in"].forEach((function(e){var n="create-sprite"===e?"Create Sprite":"Sign In";Object(r.createDomEl)("button",e,t,n,null)})),this.head}},{key:"footer",value:function(){this.foot=Object(r.createDomEl)("footer",null,this.wrapperContainer,null,null);var e=Object(r.createDomEl)("p",null,this.foot,"Created by ",null);Object(r.createDomEl)("a",null,e,"Vitali Maisiayonak",{href:"https://www.linkedin.com/public-profile/settings?trk=d_flagship3_profile_self_view_public_profile",about:"_blank"});var t=Object(r.createDomEl)("p",null,this.foot,"Inspired by ",null);return Object(r.createDomEl)("a",null,t,"Rolling Scopes School",{href:"https://rs.school",about:"_blank"}),this.foot}},{key:"sectionAbout",value:function(){var e=Object(r.createDomEl)("section","about-app",null,null,null),t=Object(r.createDomEl)("div","description",e,null,null);return Object(r.createDomEl)("h1",null,t,"Piskel Clone Project",null),Object(r.createDomEl)("p",null,t,"Create animations in your browser.",null),this.buttonCreate=Object(r.createDomEl)("button","create-sprite",t,"Create Sprite",null),Object(r.createDomEl)("img",null,e,null,{src:w.a,alt:"app screenshot"}),e}},{key:"sectionFeatures",value:function(){var e=Object(r.createDomEl)("section","features",null,null,null);Object(r.createDomEl)("h2",null,e,"Features",null);var t=Object(r.createDomEl)("ul",null,e,null,null);return this.features.forEach((function(e){return Object(r.createDomEl)("li",null,t,e,null)})),e}},{key:"main",value:function(){var t=Object(r.createDomEl)("main","landing",this.wrapperContainer,null,null);t.append(this.sectionAbout()),t.append(e.sectionSamples()),t.append(this.sectionFeatures())}},{key:"wrapperInit",value:function(e){this.header(),this.main(),this.footer(),e.append(this.wrapperContainer)}}])&&L(t.prototype,n),a&&L(t,a),e}(),O=new r.Localstorage("page"),D=!1===O.restoreData()?"landing":O.restoreData(),S=new r.Localstorage("app_init"),x={penSizeActive:1,toolActive:"pen",fastColors:["#ffffff","#c71919"],canvasSize:128,frameSet:[c.a],fps:1},M=!1===S.restoreData()?x:S.restoreData();if("sprite"===D){var F=new b(M);document.body.innerHTML="",F.wrapperInit(document.body);var T=function(){return new Promise((function(e){e(F.frames.refreshFrames())})).then((function(){return new Promise((function(e){e(F.preview.refreshFrames())})).then((function(){window.clearInterval(F.preview.stopAnimation),F.preview.player()}))}))},I=F.frames.frameActionsMousedown,P=F.frames.frameActionsMousemove;F.tools.toolContainer.addEventListener("click",(function(e){e.target.parentNode.classList.contains("pen-size")&&F.tools.penSizeChange(e,r.saveProperty,M),e.target.parentNode.classList.contains("instruments")&&F.tools.toolSwitch(e),e.target.parentNode.classList.contains("fast-colors")&&F.tools.fastColorsChange(e)})),F.tools.toolContainer.addEventListener("change",F.tools.colorChoose.bind(F.tools)),F.frames.framesContainer.addEventListener("click",(function(e){e.target.classList.contains("controls")&&F.frames.setActiveFrame(e),e.target.classList.contains("add-new-frame")&&(F.frames.createNewFrame(),T()),e.target.parentNode.classList.contains("controls")&&(F.frames.frameActionsClick(e),T())})),F.frames.framesContainer.addEventListener("mousedown",I.bind(F.frames)),F.frames.framesContainer.addEventListener("mousemove",P.bind(F.frames)),F.frames.framesContainer.addEventListener("mouseup",(function(){F.frames.frameActionsMouseup(),T()})),F.draw.canvasMain.addEventListener("mousedown",(function(e){F.draw.pencilDrawErase(e),F.draw.colorPicker(e),F.draw.colorFill(),T()})),F.draw.canvasMain.addEventListener("mouseup",(function(){F.draw.fromMainCanvasToActiveFrame(),T()})),F.draw.canvasMain.addEventListener("mousemove",(function(e){F.draw.pencilDrawErase(e)})),F.draw.canvasAlt.addEventListener("mouseup",(function(){F.draw.lineDrawMouseupListener(),T()})),F.draw.canvasAlt.addEventListener("mousedown",F.draw.lineDrawMousedownListener.bind(F.draw)),F.draw.canvasAlt.addEventListener("mousemove",F.draw.lineDrawMousemoveListener.bind(F.draw)),F.preview.fpsInputElement.addEventListener("click",F.preview.fpsRangeChange.bind(F.preview)),F.preview.fpsInputElement.addEventListener("input",F.preview.fpsRangeChange.bind(F.preview)),F.preview.fullScreenButton.addEventListener("click",F.preview.enableFullscreen.bind(F.preview)),window.addEventListener("keypress",F.tools.pressKeyListener.bind(F.tools)),window.addEventListener("unload",(function(){S.saveData(M),O.saveData(D)})),F.homeRef.addEventListener("click",(function(){D="landing",O.saveData(D),window.location.reload()}))}else{var _=new j(M);document.body.innerHTML="",_.wrapperInit(document.body),_.buttonCreate.addEventListener("click",(function(){D="sprite",O.saveData(D),window.location.reload()})),window.addEventListener("unload",(function(){O.saveData(D)}))}}]);
//# sourceMappingURL=app.bundle.js.map